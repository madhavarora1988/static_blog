<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>How to Get Started with Model Context Protocol</title>
    <style>
        :root {
            --bg-color: #111;
            --text-color: #fff;
            --border-color: #4444;
            --link-color: #a084ca;
            --link-hover: #d1b3ff;
            --code-bg: #232323;
            --code-color: #f8f8f2;
            color-scheme: light dark;
        }
        html[data-theme='light'] {
            --bg-color: #fff;
            --text-color: #181818;
            --border-color: #e0e0e0;
            --link-color: #6b3fa0;
            --link-hover: #a084ca;
            --code-bg: #f5f5f5;
            --code-color: #232323;
        }
        html {
            background: var(--bg-color);
            color: var(--text-color);
            font-family: system-ui, sans-serif;
            max-width: 120ch;
            padding: 3em 1em;
            margin: auto;
            line-height: 1.5;
            font-size: 1.25em;
        }
        body {
            background: var(--bg-color);
            color: var(--text-color);
        }
        .main-container {
            display: flex;
            gap: 2em;
        }
        .left-col {
            flex: 3 1 0%;
            min-width: 0;
        }
        .right-col {
            flex: 1 1 0%;
            min-width: 0;
            border-left: 2px solid var(--border-color);
            padding-left: 2em;
        }
        pre, code {
            background: var(--code-bg) !important;
            color: var(--code-color) !important;
            border-radius: 4px;
        }
        pre {
            padding: 1em;
            overflow-x: auto;
        }
        code {
            padding: 0.2em 0.4em;
            font-size: 0.95em;
        }
        h1, h2, h3, h4, h5, h6 {
            color: var(--text-color);
            font-weight: bold;
        }
        img {
            max-width: 100%;
            height: auto;
        }
        #head-link {
            text-decoration: none;
            color: inherit;
            font-size: 2.2em;
            font-weight: bold;
            margin-right: 2em;
        }
        #head-link:hover {
            text-decoration: underline;
        }
        @media (max-width: 900px) {
            .main-container {
                flex-direction: column;
            }
            .right-col {
                border-left: none;
                padding-left: 0;
                margin-top: 2em;
            }
        }
        .header-bar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 2em;
        }
        .nav-links {
            display: flex;
            gap: 1.5em;
        }
        .nav-link {
            color: var(--link-color);
            font-weight: 600;
            font-size: 1.15em;
            text-decoration: none;
            transition: color 0.2s;
        }
        .nav-link:hover {
            text-decoration: underline;
            color: var(--link-hover);
        }
        a {
            color: var(--link-color);
            text-decoration: underline;
        }
        a:hover {
            color: var(--link-hover);
        }
        .theme-toggle {
            background: none;
            border: 2px solid var(--border-color);
            border-radius: 6px;
            cursor: pointer;
            font-size: 1.3em;
            margin-left: 1em;
            color: var(--link-color);
            transition: color 0.2s, border-color 0.2s;
            vertical-align: middle;
            width: 2em;
            height: 2em;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .theme-toggle:hover {
            color: var(--link-hover);
            border-color: var(--link-hover);
        }
    </style>
</head>
<body>
    <div class="header-bar">
        <a href="./" id="head-link">Madhav Arora's Blog</a>
        <div class="nav-links">
            <a href="about.html" class="nav-link">About</a>
            <a href="subscribe.html" class="nav-link">Subscribe</a>
            <button class="theme-toggle" id="theme-toggle" title="Toggle day/night mode">â˜€ï¸</button>
        </div>
    </div>
    <div class="main-container">
        <div class="left-col">
            <h1 id="how-to-get-started-with-model-context-protocol">How to Get Started with Model Context Protocol</h1>

<blockquote>
  <p><strong>TL;DR</strong> <br />
  Spin up a local SQLite MCP server, point your favourite LLM at it, and start talking SQLâ€”in under five minutes.</p>
</blockquote>

<p><img src="posts/model_context_protocol_get_started/Pasted image 20250505173159.png" alt="alt text" />
Source: Generated by Dall-E 3</p>

<h2 id="introduction">Introduction</h2>

<p>Large language models shine when they can <strong>reason over real data</strong>, but handing them unfettered access to your production database is... well, terrifying. Enter <strong>Model Context Protocol (MCP)</strong>: a lightweight, toolâ€‘based contract that lets you expose <em>just the right capabilities</em> (readâ€‘only queries, schema discovery, feedback collection, etc.) in a way that models can understand and invoke safely.</p>

<p>In this guide weâ€™ll walk through a minimal proofâ€‘ofâ€‘concept (POC) MCP server built with <strong>FastMCP</strong> and SQLite. Weâ€™ll cover:</p>

<ul>
<li><p>Setting up the server and sample database</p></li>
<li><p>Exploring the custom tools we defined (execute<em>query, describe</em>tableâ€¦)</p></li>
<li><p>Connecting the server to Claude Desktop for interactive querying</p></li>
<li><p>Ideas for extending the POC into something productionâ€‘ready</p></li>
</ul>

<p>The code is public on <a href="https://github.com/madhavarora1988/mcp_sqlite_poc">GitHub</a> â€” clone it, follow along, and drop questions in the comments if anything feels off.</p>

<h2 id="what-is-the-model-context-protocol">What is the Model Context Protocol?</h2>

<p>On <strong>NovemberÂ 25,Â 2024</strong> Anthropic openâ€‘sourced MCP, positioning it as a universal bridge between AI assistants and the systems where real data livesâ€”content repositories, business apps, dev environments, you name it. Instead of writing a bespoke connector for every new data source, you expose a small set of JSONâ€‘described tools on an <strong>MCP server</strong> and let any <strong>MCP client</strong> (Claude Desktop, an agent framework, your own script) call them.</p>

<p><strong>Why the fuss?</strong></p>

<ul>
<li><p><strong>Open, twoâ€‘way standard</strong> â€” secure, structured requests <em>and</em> responses flow between models and data stores.</p></li>
<li><p><strong>Server / client split</strong> â€” run a tiny server next to your database (Postgres, Git, Slack, GoogleÂ Driveâ€¦), point the model at it, and youâ€™re done. No extra glue.</p></li>
<li><p><strong>Ecosystem out of the gate</strong> â€” Anthropic shipped readyâ€‘made servers for GoogleÂ Drive, Slack, GitHub, Postgres, and Puppeteer; early adopters like Block and Apollo already have MCP in production.</p></li>
<li><p><strong>Firstâ€‘class in Claude Desktop</strong> â€” local servers autoâ€‘register so you can chat with your data straight from the desktop app.</p></li>
<li><p><strong>Not just databasesÂ â€” remote APIs too.</strong> MCP servers can wrap any REST, GraphQL, or gRPC service (Stripe, Jira, your own microservice), letting models hit cloud APIs exactly like local tables.</p></li>
<li><p><strong>Communityâ€‘driven</strong> â€” spec, SDKs, and reference implementations all live in public reposâ€”pull requests welcome.</p></li>
</ul>

<p>With that backdrop, letâ€™s zoom in on our SQLite demo and see where MCP really shines.</p>

<h3 id="general-architecture">General architecture</h3>

<p>MCP follows a simple <strong>clientÂ â†”Â server</strong> pattern that scales from your laptop to the cloud:
<img src="posts/model_context_protocol_get_started/Pasted image 20250505141259.png" alt="alt text" />
Source: <a href="https://modelcontextprotocol.io/introduction">https://modelcontextprotocol.io/introduction</a></p>

<p>|Component|Role|
|---|---|
|<strong>MCPÂ Host</strong>|The UI or agent (ClaudeÂ Desktop, your IDE) that wants context|
|<strong>MCPÂ Client</strong>|Maintains a 1â€‘toâ€‘1 connection with a server, handling auth &amp; retries|
|<strong>MCPÂ Server</strong>|Lightweight process that exposes domainâ€‘specific tools via JSON|
|<strong>LocalÂ Data Source</strong>|Files, DBs, or services the server can access on your machine|
|<strong>RemoteÂ Service</strong>|External API the server can proxy (e.g., Stripe, Jira)|</p>

<p>A single host can juggle multiple servers at onceâ€”imagine ClaudeÂ Desktop chatting with your local SQLite DB, a Git repo, and a SaaS ticketing API simultaneously.</p>

<blockquote>
  <p><strong>What weâ€™ll build in this article:</strong> weâ€™re going to implement the <strong>MCPÂ Server</strong> blockâ€”highlighted aboveâ€”using Python, FastMCP, and SQLite. By the end youâ€™ll have a fullyâ€‘functioning server that exposes database tools the host (ClaudeÂ Desktop) can call in real time.</p>
</blockquote>

<hr />

<h2 id="in-a-hurry">In a Hurry?</h2>

<p>If you just want to run the demo locally, the quickâ€‘start is:</p>

<pre><code># 1. Clone the repo
git clone https://github.com/madhavarora1988/mcp_sqlite_poc.git
cd mcp_sqlite_poc

# 2. Install dependencies
pip install -r requirements.txt

# 3. (Optional) generate a fresh SQLite DB with sample tables &amp; rows
python generate_sample_db.py

# 4. Fire up the MCP server (readâ€‘only by default)
python server.py
</code></pre>

<p>By default the server listens on <strong>stdio</strong>, which is exactly what Claude Desktop expects when it autoâ€‘detects local MCP servers. If youâ€™d rather expose an HTTP port, simply change the <code>transport</code> parameter in <code>app.run_async()</code>.</p>

<h2 id="understanding-the-poc">Understanding the POC</h2>

<h3 id="project-layout">Project layout</h3>

<pre><code>.
â”œâ”€â”€ generate_sample_db.py  # creates sample.db with metrics, users, ordersâ€¦
â”œâ”€â”€ requirements.txt       # FastMCP, aiosqlite, pydanticâ€¦
â”œâ”€â”€ server.py              # the SQLite MCP server
â””â”€â”€ README.md              # extended docs &amp; Env vars
</code></pre>

<p><strong>generate<em>sample</em>db.py</strong> bootstraps a realistic eâ€‘commerce schema with products, orders, and an <code>order_analytics</code> view so you have something to query straight away. <br />
<strong>server.py</strong> exposes six MCP tools and handles validation, logging, and optional readâ€‘only mode.</p>

<h3 id="key-safety-features">Key safety features</h3>

<ul>
<li><p><strong>Readâ€‘only toggle</strong> â€“ controlled via the <code>READ_ONLY</code> env var (defaults to <code>true</code>).</p></li>
<li><p><strong><code>validate_query()</code></strong> â€“ rejects any SQL that starts with or contains risky verbs (<code>DROP</code>, <code>PRAGMA</code>, <code>ATTACH</code>, etc.) before it touches the database.</p></li>
<li><p><strong>Paramâ€‘sanitised inserts</strong> â€“ when <code>READ_ONLY</code> is <code>false</code>, sampleâ€‘data helpers still use parameterised statements to avoid injection.</p></li>
</ul>

<h3 id="available-tools">Available tools</h3>

<p>|Tool|Purpose|Typical Payload|
|---|---|---|
|<code>execute_query</code>|Run a SELECT (or safe write) statement|<code>{"query": "SELECT * FROM products LIMIT 3;"}</code>|
|<code>list_tables</code>|See what objects are available|<code>{}</code>|
|<code>describe_table</code>|Get column names and types|<code>{"table_name": "orders"}</code>|
|<code>count_rows</code>|Quick row count|<code>{"table_name": "order_items"}</code>|
|<code>insert_sample_data</code>|Populate demo rows (writeâ€‘mode only)|<code>{"table_name": "customers", "count": 10}</code>|
|<code>add_feedback</code>|Collect user feedback|<code>{"user": "Alice", "email": "...", "feedback": "Great!"}</code>|</p>

<p>Feel free to extend this list with your own domainâ€‘specific toolsâ€”just decorate an async function with <code>@app.tool("my_tool")</code> and FastMCP will handle the schema for you.</p>

<h2 id="testing-in-claude-desktop">Testing in Claude Desktop</h2>

<p>ClaudeÂ Desktop automatically scans its configuration file for MCP servers and makes them available in any chat. On macOS youâ€™ll find (or create) that file here:</p>

<pre><code>~/Library/Application Support/Claude/claude_desktop_config.json
</code></pre>

<p>Append (or merge) the following block so Claude knows how to start our SQLite server:</p>

<pre><code>{
  "mcpServers": {
    "sqlite": {
      "command": "&lt;absolute uv path&gt;",
      "args": [
        "--directory",
        "&lt;Path to workspace&gt;",
        "run",
        "server.py"
      ]
    }
  }
}
</code></pre>

<ul>
<li><p><strong><code>&lt;absolute uv path&gt;</code></strong> â€“ full path to the <strong>uv</strong> executable (e.g. <code>/usr/local/bin/uv</code>).</p></li>
<li><p><strong><code>&lt;Path to workspace&gt;</code></strong> â€“ folder that contains <code>server.py</code>, <code>generate_sample_db.py</code>, and <code>sample.db</code>.</p></li>
</ul>

<p>Save the fileâ€”if the path didnâ€™t exist, macOS will create the <code>Claude</code> directory chain automaticallyâ€”then <strong>restart ClaudeÂ Desktop</strong>, and you should see <strong>sqlite</strong> listed in the leftâ€‘hand <em>Context</em> panel. Youâ€™ll also notice a small <em>hammerÂ icon</em> with a count (e.g. <strong>6</strong>) that reads <strong>â€œMCP tools availableâ€</strong> when you hoverâ€”proof that the server registered correctly (see ScreenshotÂ 1 below).</p>

<p><img src="posts/model_context_protocol_get_started/Pasted image 20250505141228.png" alt="alt text" />
Source: Image byÂ Author</p>

<p>Click that icon and Claude pops up a modal detailing every tool your server exposed (ScreenshotÂ 2). From here you can doubleâ€‘check descriptionsâ€”or skip ahead to the <strong>Example interactive query</strong> section below to watch a full conversation in action.</p>

<p><img src="posts/model_context_protocol_get_started/Pasted image 20250505141156.png" alt="alt text" />
Available Tools(Source: Image byÂ Author)</p>

<h3 id="example-interactive-query">Example interactive query</h3>

<p>Once the tools show up you can chat naturally, and Claude will chain the right calls for you. In the screenshots below I asked three followâ€‘up questions:</p>

<ol>
<li><strong>"Can you check how many orders were placed?"</strong> â€“ Claude inspected the schema with <code>list_tables</code>, used <code>count_rows</code>, and reported <strong>7 orders</strong>.</li>
</ol>

<p><img src="posts/model_context_protocol_get_started/Pasted image 20250427195246.png" alt="alt text" />
Source:Image byÂ Author</p>

<ol start="2">
<li><p><strong>"Yes, who placed them?"</strong> â€“ Claude peeked at table schemas (<code>describe_table</code>), executed a join via <code>execute_query</code>, and returned a customerâ€‘byâ€‘customer breakdown. 
<img src="posts/model_context_protocol_get_started/Pasted image 20250427195300.png" alt="alt text" />
Source:Image byÂ Author</p></li>
<li><p><strong>"User John says "This product is awesome"Â â€” please update the associated table."</strong> â€“ Claude validated the schema again and invoked <code>add_feedback</code> to insert the comment into the <strong>feedback</strong> table, confirming success with the returned ID.</p></li>
</ol>

<p><img src="posts/model_context_protocol_get_started/Pasted image 20250427195557.png" alt="alt text" />
Source: Image byÂ Author</p>

<blockquote>
  <p>ğŸ’¡Â Notice how the assistant narrates each tool invocation, so you can audit exactly what was run.</p>
</blockquote>

<p>Feel free to riff on this flowâ€”ask for the most expensive order, daily sales totals, add new rows (with readâ€‘only off), or fetch inactive users and watch the model stitch together the correct SQL on the fly.</p>

<hr />

<h2 id="putting-it-all-together">Putting It All Together</h2>

<ol>
<li><p><strong>Spin up the server</strong> â€“ local, container, or cloud function.</p></li>
<li><p><strong>Add it to your model config</strong> â€“ Claude Desktop, Anthropic SDK, LangChain, etc.</p></li>
<li><p><strong>Let the model explore the schema</strong> â€“ start with <code>list_tables()</code> and <code>describe_table()</code>.</p></li>
<li><p><strong>Iterate</strong> â€“ add domainâ€‘specific tools (e.g., <code>forecast_sales</code>, <code>flag_anomaly</code>) as your useâ€‘case grows.</p></li>
<li><p><strong>Lock it down</strong> â€“ once happy, switch the DB to readâ€‘only or point the server at a replica.</p></li>
</ol>

<h2 id="suggestions">Suggestions</h2>

<ul>
<li><p><strong>Keep it small.</strong> Only expose tables the model genuinely needs (views are great for this).</p></li>
<li><p><strong>Log aggressively.</strong> The demo prints every query with user/time stampsâ€”pipe that into Loki or CloudWatch in prod.</p></li>
<li><p><strong>Fail loudly.</strong> If a malformed query sneaks past validation, raise a clear error so the model can retry with a better prompt.</p></li>
<li><p><strong>Document tool semantics.</strong> Use the <code>description</code> field in <code>@app.tool</code> to teach the model what each action does.</p></li>
</ul>

<h2 id="conclusion">Conclusion</h2>

<p>Model Context Protocol turns the vague idea of â€œlet the LLM hit the databaseâ€ into a concrete, enforceable contract. With less than 200 lines of Python weâ€™ve wired up authenticationâ€‘free SQLite access, safe query validation, and a friendly tool catalogue the model can browse. Give the POC a whirl, customise it for your own datasets, and let me know in the comments what you build!</p>

        </div>
        <div class="right-col">
            
        </div>
    </div>
    <script>
    (function() {
        const toggleBtn = document.getElementById('theme-toggle');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        function setTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);
            toggleBtn.innerHTML = theme === 'light' ? 'â˜€ï¸' : 'ğŸŒ™';
        }
        // Initial theme
        const saved = localStorage.getItem('theme');
        if (saved) {
            setTheme(saved);
        } else {
            setTheme(prefersDark ? 'dark' : 'light');
        }
        toggleBtn.addEventListener('click', function() {
            const current = document.documentElement.getAttribute('data-theme');
            setTheme(current === 'light' ? 'dark' : 'light');
        });
    })();
    </script>
</body>
</html> 