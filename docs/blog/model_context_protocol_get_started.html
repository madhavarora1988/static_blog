<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>How to Get Started with Model Context Protocol</title>
    <style>
        :root {
            --bg-color: #111;
            --text-color: #fff;
            --border-color: #4444;
            --link-color: #a084ca;
            --link-hover: #d1b3ff;
            --code-bg: #232323;
            --code-color: #f8f8f2;
            color-scheme: light dark;
        }
        html[data-theme='light'] {
            --bg-color: #fff;
            --text-color: #181818;
            --border-color: #e0e0e0;
            --link-color: #6b3fa0;
            --link-hover: #a084ca;
            --code-bg: #f5f5f5;
            --code-color: #232323;
        }
        html {
            background: var(--bg-color);
            color: var(--text-color);
            font-family: system-ui, sans-serif;
            max-width: 120ch;
            padding: 3em 1em;
            margin: auto;
            line-height: 1.5;
            font-size: 1.25em;
        }
        body {
            background: var(--bg-color);
            color: var(--text-color);
        }
        .main-container {
            display: flex;
            gap: 2em;
        }
        .left-col {
            flex: 3 1 0%;
            min-width: 0;
        }
        .right-col {
            flex: 1 1 0%;
            min-width: 0;
            border-left: 2px solid var(--border-color);
            padding-left: 2em;
        }
        pre, code {
            background: var(--code-bg) !important;
            color: var(--code-color) !important;
            border-radius: 4px;
        }
        pre {
            padding: 1em;
            overflow-x: auto;
        }
        code {
            padding: 0.2em 0.4em;
            font-size: 0.95em;
        }
        h1, h2, h3, h4, h5, h6 {
            color: var(--text-color);
            font-weight: bold;
        }
        img {
            max-width: 100%;
            height: auto;
        }
        #head-link {
            text-decoration: none;
            color: inherit;
            font-size: 2.2em;
            font-weight: bold;
            margin-right: 2em;
        }
        #head-link:hover {
            text-decoration: underline;
        }
        @media (max-width: 900px) {
            .main-container {
                flex-direction: column;
            }
            .right-col {
                border-left: none;
                padding-left: 0;
                margin-top: 2em;
            }
        }
        .header-bar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 2em;
        }
        .nav-links {
            display: flex;
            gap: 1.5em;
        }
        .nav-link {
            color: var(--link-color);
            font-weight: 600;
            font-size: 1.15em;
            text-decoration: none;
            transition: color 0.2s;
        }
        .nav-link:hover {
            text-decoration: underline;
            color: var(--link-hover);
        }
        a {
            color: var(--link-color);
            text-decoration: underline;
        }
        a:hover {
            color: var(--link-hover);
        }
        .theme-toggle {
            background: none;
            border: 2px solid var(--border-color);
            border-radius: 6px;
            cursor: pointer;
            font-size: 1.3em;
            margin-left: 1em;
            color: var(--link-color);
            transition: color 0.2s, border-color 0.2s;
            vertical-align: middle;
            width: 2em;
            height: 2em;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .theme-toggle:hover {
            color: var(--link-hover);
            border-color: var(--link-hover);
        }
    </style>
</head>
<body>
    <div class="header-bar">
        <a href="/" id="head-link">Madhav Arora's Blog</a>
        <div class="nav-links">
            <a href="/" class="nav-link">Home</a>
            <a href="/about.html" class="nav-link">About</a>
            <a href="/subscribe.html" class="nav-link">Subscribe</a>
            <button class="theme-toggle" id="theme-toggle" title="Toggle day/night mode">‚òÄÔ∏è</button>
        </div>
    </div>
    <div class="main-container">
        <div class="left-col">
            <h1 id="how-to-get-started-with-model-context-protocol">How to Get Started with Model Context Protocol</h1>

<blockquote>
  <p><strong>TL;DR</strong> <br />
  Spin up a local SQLite MCP server, point your favourite LLM at it, and start talking SQL‚Äîin under five minutes.</p>
</blockquote>

<p><img src="posts/model_context_protocol_get_started/Pasted image 20250505173159.png" alt="alt text" />
Source: Generated by Dall-E 3</p>

<h2 id="introduction">Introduction</h2>

<p>Large language models shine when they can <strong>reason over real data</strong>, but handing them unfettered access to your production database is... well, terrifying. Enter <strong>Model Context Protocol (MCP)</strong>: a lightweight, tool‚Äëbased contract that lets you expose <em>just the right capabilities</em> (read‚Äëonly queries, schema discovery, feedback collection, etc.) in a way that models can understand and invoke safely.</p>

<p>In this guide we‚Äôll walk through a minimal proof‚Äëof‚Äëconcept (POC) MCP server built with <strong>FastMCP</strong> and SQLite. We‚Äôll cover:</p>

<ul>
<li><p>Setting up the server and sample database</p></li>
<li><p>Exploring the custom tools we defined (execute<em>query, describe</em>table‚Ä¶)</p></li>
<li><p>Connecting the server to Claude Desktop for interactive querying</p></li>
<li><p>Ideas for extending the POC into something production‚Äëready</p></li>
</ul>

<p>The code is public on <a href="https://github.com/madhavarora1988/mcp_sqlite_poc">GitHub</a> ‚Äî clone it, follow along, and drop questions in the comments if anything feels off.</p>

<h2 id="what-is-the-model-context-protocol">What is the Model Context Protocol?</h2>

<p>On <strong>November¬†25,¬†2024</strong> Anthropic open‚Äësourced MCP, positioning it as a universal bridge between AI assistants and the systems where real data lives‚Äîcontent repositories, business apps, dev environments, you name it. Instead of writing a bespoke connector for every new data source, you expose a small set of JSON‚Äëdescribed tools on an <strong>MCP server</strong> and let any <strong>MCP client</strong> (Claude Desktop, an agent framework, your own script) call them.</p>

<p><strong>Why the fuss?</strong></p>

<ul>
<li><p><strong>Open, two‚Äëway standard</strong> ‚Äî secure, structured requests <em>and</em> responses flow between models and data stores.</p></li>
<li><p><strong>Server / client split</strong> ‚Äî run a tiny server next to your database (Postgres, Git, Slack, Google¬†Drive‚Ä¶), point the model at it, and you‚Äôre done. No extra glue.</p></li>
<li><p><strong>Ecosystem out of the gate</strong> ‚Äî Anthropic shipped ready‚Äëmade servers for Google¬†Drive, Slack, GitHub, Postgres, and Puppeteer; early adopters like Block and Apollo already have MCP in production.</p></li>
<li><p><strong>First‚Äëclass in Claude Desktop</strong> ‚Äî local servers auto‚Äëregister so you can chat with your data straight from the desktop app.</p></li>
<li><p><strong>Not just databases¬†‚Äî remote APIs too.</strong> MCP servers can wrap any REST, GraphQL, or gRPC service (Stripe, Jira, your own microservice), letting models hit cloud APIs exactly like local tables.</p></li>
<li><p><strong>Community‚Äëdriven</strong> ‚Äî spec, SDKs, and reference implementations all live in public repos‚Äîpull requests welcome.</p></li>
</ul>

<p>With that backdrop, let‚Äôs zoom in on our SQLite demo and see where MCP really shines.</p>

<h3 id="general-architecture">General architecture</h3>

<p>MCP follows a simple <strong>client¬†‚Üî¬†server</strong> pattern that scales from your laptop to the cloud:
<img src="posts/model_context_protocol_get_started/Pasted image 20250505141259.png" alt="alt text" />
Source: <a href="https://modelcontextprotocol.io/introduction">https://modelcontextprotocol.io/introduction</a></p>

<p>|Component|Role|
|---|---|
|<strong>MCP¬†Host</strong>|The UI or agent (Claude¬†Desktop, your IDE) that wants context|
|<strong>MCP¬†Client</strong>|Maintains a 1‚Äëto‚Äë1 connection with a server, handling auth &amp; retries|
|<strong>MCP¬†Server</strong>|Lightweight process that exposes domain‚Äëspecific tools via JSON|
|<strong>Local¬†Data Source</strong>|Files, DBs, or services the server can access on your machine|
|<strong>Remote¬†Service</strong>|External API the server can proxy (e.g., Stripe, Jira)|</p>

<p>A single host can juggle multiple servers at once‚Äîimagine Claude¬†Desktop chatting with your local SQLite DB, a Git repo, and a SaaS ticketing API simultaneously.</p>

<blockquote>
  <p><strong>What we‚Äôll build in this article:</strong> we‚Äôre going to implement the <strong>MCP¬†Server</strong> block‚Äîhighlighted above‚Äîusing Python, FastMCP, and SQLite. By the end you‚Äôll have a fully‚Äëfunctioning server that exposes database tools the host (Claude¬†Desktop) can call in real time.</p>
</blockquote>

<hr />

<h2 id="in-a-hurry">In a Hurry?</h2>

<p>If you just want to run the demo locally, the quick‚Äëstart is:</p>

<div class="codehilite">
<pre><span></span><code><span class="c1"># 1. Clone the repo</span>
git clone https://github.com/madhavarora1988/mcp_sqlite_poc.git
<span class="nb">cd</span> mcp_sqlite_poc

<span class="c1"># 2. Install dependencies</span>
pip install -r requirements.txt

<span class="c1"># 3. (Optional) generate a fresh SQLite DB with sample tables &amp; rows</span>
python generate_sample_db.py

<span class="c1"># 4. Fire up the MCP server (read‚Äëonly by default)</span>
python server.py
</code></pre>
</div>

<p>By default the server listens on <strong>stdio</strong>, which is exactly what Claude Desktop expects when it auto‚Äëdetects local MCP servers. If you‚Äôd rather expose an HTTP port, simply change the <code>transport</code> parameter in <code>app.run_async()</code>.</p>

<h2 id="understanding-the-poc">Understanding the POC</h2>

<h3 id="project-layout">Project layout</h3>

<div class="codehilite">
<pre><span></span><code>.
‚îú‚îÄ‚îÄ generate_sample_db.py  # creates sample.db with metrics, users, orders‚Ä¶
‚îú‚îÄ‚îÄ requirements.txt       # FastMCP, aiosqlite, pydantic‚Ä¶
‚îú‚îÄ‚îÄ server.py              # the SQLite MCP server
‚îî‚îÄ‚îÄ README.md              # extended docs &amp; Env vars
</code></pre>
</div>

<p><strong>generate<em>sample</em>db.py</strong> bootstraps a realistic e‚Äëcommerce schema with products, orders, and an <code>order_analytics</code> view so you have something to query straight away. <br />
<strong>server.py</strong> exposes six MCP tools and handles validation, logging, and optional read‚Äëonly mode.</p>

<h3 id="key-safety-features">Key safety features</h3>

<ul>
<li><p><strong>Read‚Äëonly toggle</strong> ‚Äì controlled via the <code>READ_ONLY</code> env var (defaults to <code>true</code>).</p></li>
<li><p><strong><code>validate_query()</code></strong> ‚Äì rejects any SQL that starts with or contains risky verbs (<code>DROP</code>, <code>PRAGMA</code>, <code>ATTACH</code>, etc.) before it touches the database.</p></li>
<li><p><strong>Param‚Äësanitised inserts</strong> ‚Äì when <code>READ_ONLY</code> is <code>false</code>, sample‚Äëdata helpers still use parameterised statements to avoid injection.</p></li>
</ul>

<h3 id="available-tools">Available tools</h3>

<p>|Tool|Purpose|Typical Payload|
|---|---|---|
|<code>execute_query</code>|Run a SELECT (or safe write) statement|<code>{"query": "SELECT * FROM products LIMIT 3;"}</code>|
|<code>list_tables</code>|See what objects are available|<code>{}</code>|
|<code>describe_table</code>|Get column names and types|<code>{"table_name": "orders"}</code>|
|<code>count_rows</code>|Quick row count|<code>{"table_name": "order_items"}</code>|
|<code>insert_sample_data</code>|Populate demo rows (write‚Äëmode only)|<code>{"table_name": "customers", "count": 10}</code>|
|<code>add_feedback</code>|Collect user feedback|<code>{"user": "Alice", "email": "...", "feedback": "Great!"}</code>|</p>

<p>Feel free to extend this list with your own domain‚Äëspecific tools‚Äîjust decorate an async function with <code>@app.tool("my_tool")</code> and FastMCP will handle the schema for you.</p>

<h2 id="testing-in-claude-desktop">Testing in Claude Desktop</h2>

<p>Claude¬†Desktop automatically scans its configuration file for MCP servers and makes them available in any chat. On macOS you‚Äôll find (or create) that file here:</p>

<pre><code>~/Library/Application Support/Claude/claude_desktop_config.json
</code></pre>

<p>Append (or merge) the following block so Claude knows how to start our SQLite server:</p>

<div class="codehilite">
<pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;mcpServers&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;sqlite&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;command&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;absolute uv path&gt;&quot;</span><span class="p">,</span>
      <span class="nt">&quot;args&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;--directory&quot;</span><span class="p">,</span>
        <span class="s2">&quot;&lt;Path to workspace&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;run&quot;</span><span class="p">,</span>
        <span class="s2">&quot;server.py&quot;</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<ul>
<li><p><strong><code>&lt;absolute uv path&gt;</code></strong> ‚Äì full path to the <strong>uv</strong> executable (e.g. <code>/usr/local/bin/uv</code>).</p></li>
<li><p><strong><code>&lt;Path to workspace&gt;</code></strong> ‚Äì folder that contains <code>server.py</code>, <code>generate_sample_db.py</code>, and <code>sample.db</code>.</p></li>
</ul>

<p>Save the file‚Äîif the path didn‚Äôt exist, macOS will create the <code>Claude</code> directory chain automatically‚Äîthen <strong>restart Claude¬†Desktop</strong>, and you should see <strong>sqlite</strong> listed in the left‚Äëhand <em>Context</em> panel. You‚Äôll also notice a small <em>hammer¬†icon</em> with a count (e.g. <strong>6</strong>) that reads <strong>‚ÄúMCP tools available‚Äù</strong> when you hover‚Äîproof that the server registered correctly (see Screenshot¬†1 below).</p>

<p><img src="posts/model_context_protocol_get_started/Pasted image 20250505141228.png" alt="alt text" />
Source: Image by¬†Author</p>

<p>Click that icon and Claude pops up a modal detailing every tool your server exposed (Screenshot¬†2). From here you can double‚Äëcheck descriptions‚Äîor skip ahead to the <strong>Example interactive query</strong> section below to watch a full conversation in action.</p>

<p><img src="posts/model_context_protocol_get_started/Pasted image 20250505141156.png" alt="alt text" />
Available Tools(Source: Image by¬†Author)</p>

<h3 id="example-interactive-query">Example interactive query</h3>

<p>Once the tools show up you can chat naturally, and Claude will chain the right calls for you. In the screenshots below I asked three follow‚Äëup questions:</p>

<ol>
<li><strong>"Can you check how many orders were placed?"</strong> ‚Äì Claude inspected the schema with <code>list_tables</code>, used <code>count_rows</code>, and reported <strong>7 orders</strong>.</li>
</ol>

<p><img src="posts/model_context_protocol_get_started/Pasted image 20250427195246.png" alt="alt text" />
Source:Image by¬†Author</p>

<ol start="2">
<li><p><strong>"Yes, who placed them?"</strong> ‚Äì Claude peeked at table schemas (<code>describe_table</code>), executed a join via <code>execute_query</code>, and returned a customer‚Äëby‚Äëcustomer breakdown. 
<img src="posts/model_context_protocol_get_started/Pasted image 20250427195300.png" alt="alt text" />
Source:Image by¬†Author</p></li>
<li><p><strong>"User John says "This product is awesome"¬†‚Äî please update the associated table."</strong> ‚Äì Claude validated the schema again and invoked <code>add_feedback</code> to insert the comment into the <strong>feedback</strong> table, confirming success with the returned ID.</p></li>
</ol>

<p><img src="posts/model_context_protocol_get_started/Pasted image 20250427195557.png" alt="alt text" />
Source: Image by¬†Author</p>

<blockquote>
  <p>üí°¬†Notice how the assistant narrates each tool invocation, so you can audit exactly what was run.</p>
</blockquote>

<p>Feel free to riff on this flow‚Äîask for the most expensive order, daily sales totals, add new rows (with read‚Äëonly off), or fetch inactive users and watch the model stitch together the correct SQL on the fly.</p>

<hr />

<h2 id="putting-it-all-together">Putting It All Together</h2>

<ol>
<li><p><strong>Spin up the server</strong> ‚Äì local, container, or cloud function.</p></li>
<li><p><strong>Add it to your model config</strong> ‚Äì Claude Desktop, Anthropic SDK, LangChain, etc.</p></li>
<li><p><strong>Let the model explore the schema</strong> ‚Äì start with <code>list_tables()</code> and <code>describe_table()</code>.</p></li>
<li><p><strong>Iterate</strong> ‚Äì add domain‚Äëspecific tools (e.g., <code>forecast_sales</code>, <code>flag_anomaly</code>) as your use‚Äëcase grows.</p></li>
<li><p><strong>Lock it down</strong> ‚Äì once happy, switch the DB to read‚Äëonly or point the server at a replica.</p></li>
</ol>

<h2 id="suggestions">Suggestions</h2>

<ul>
<li><p><strong>Keep it small.</strong> Only expose tables the model genuinely needs (views are great for this).</p></li>
<li><p><strong>Log aggressively.</strong> The demo prints every query with user/time stamps‚Äîpipe that into Loki or CloudWatch in prod.</p></li>
<li><p><strong>Fail loudly.</strong> If a malformed query sneaks past validation, raise a clear error so the model can retry with a better prompt.</p></li>
<li><p><strong>Document tool semantics.</strong> Use the <code>description</code> field in <code>@app.tool</code> to teach the model what each action does.</p></li>
</ul>

<h2 id="conclusion">Conclusion</h2>

<p>Model Context Protocol turns the vague idea of ‚Äúlet the LLM hit the database‚Äù into a concrete, enforceable contract. With less than 200 lines of Python we‚Äôve wired up authentication‚Äëfree SQLite access, safe query validation, and a friendly tool catalogue the model can browse. Give the POC a whirl, customise it for your own datasets, and let me know in the comments what you build!</p>

        </div>
        <div class="right-col">
            
        </div>
    </div>
    <script>
    (function() {
        const toggleBtn = document.getElementById('theme-toggle');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        function setTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);
            toggleBtn.innerHTML = theme === 'light' ? '‚òÄÔ∏è' : 'üåô';
        }
        // Initial theme
        const saved = localStorage.getItem('theme');
        if (saved) {
            setTheme(saved);
        } else {
            setTheme(prefersDark ? 'dark' : 'light');
        }
        toggleBtn.addEventListener('click', function() {
            const current = document.documentElement.getAttribute('data-theme');
            setTheme(current === 'light' ? 'dark' : 'light');
        });
    })();
    </script>
</body>
</html> 